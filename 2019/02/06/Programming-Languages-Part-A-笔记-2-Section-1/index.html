<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">
<meta name="google-site-verification" content="mS6tdIKrisqbP1HemlJXaAUWsqoLxTRprQdjQnk-OYk" />












<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '6.4.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Section 1ML Variable Bindings and Expressions一些语法123456(* this is a comment *)val x = 1;                          (* variable binding *)val y = if x &amp;gt; 0 then x else 0 - x; (* condition expression *">
<meta name="keywords" content="函数式编程,编程语言理论">
<meta property="og:type" content="article">
<meta property="og:title" content="Programming Languages (Part A) 笔记 2 Section 1">
<meta property="og:url" content="http://DimLight1998.github.io/2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/index.html">
<meta property="og:site_name" content="Computation &amp; Design">
<meta property="og:description" content="Section 1ML Variable Bindings and Expressions一些语法123456(* this is a comment *)val x = 1;                          (* variable binding *)val y = if x &amp;gt; 0 then x else 0 - x; (* condition expression *">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-02-28T08:20:27.755Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Programming Languages (Part A) 笔记 2 Section 1">
<meta name="twitter:description" content="Section 1ML Variable Bindings and Expressions一些语法123456(* this is a comment *)val x = 1;                          (* variable binding *)val y = if x &amp;gt; 0 then x else 0 - x; (* condition expression *">






  <link rel="canonical" href="http://DimLight1998.github.io/2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Programming Languages (Part A) 笔记 2 Section 1 | Computation & Design</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Computation & Design</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />首页</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />标签</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />归档</a>
  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://DimLight1998.github.io/2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Yang">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Computation & Design">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Programming Languages (Part A) 笔记 2 Section 1
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2019-02-06 00:01:58" itemprop="dateCreated datePublished" datetime="2019-02-06T00:01:58+08:00">2019-02-06</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-02-28 16:20:27" itemprop="dateModified" datetime="2019-02-28T16:20:27+08:00">2019-02-28</time>
              
            
          </span>

          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/#comments" itemprop="discussionUrl">
                
                  <span class="post-comments-count disqus-comment-count"
                        data-disqus-identifier="2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Section-1"><a href="#Section-1" class="headerlink" title="Section 1"></a>Section 1</h1><h2 id="ML-Variable-Bindings-and-Expressions"><a href="#ML-Variable-Bindings-and-Expressions" class="headerlink" title="ML Variable Bindings and Expressions"></a>ML Variable Bindings and Expressions</h2><h3 id="一些语法"><a href="#一些语法" class="headerlink" title="一些语法"></a>一些语法</h3><figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">(* this is a comment *)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> x = <span class="number">1</span>;                          <span class="comment">(* variable binding *)</span></span><br><span class="line"><span class="keyword">val</span> y = <span class="keyword">if</span> x &gt; <span class="number">0</span> <span class="keyword">then</span> x <span class="keyword">else</span> <span class="number">0</span> - x; <span class="comment">(* condition expression *)</span></span><br><span class="line"><span class="keyword">val</span> z = abs y;                      <span class="comment">(* function call *)</span></span><br><span class="line"><span class="keyword">val</span> w = abs(z);                     <span class="comment">(* another style of function call *)</span></span><br></pre></td></tr></table></figure>
<p>注释和 variable binding 的语法如上。</p>
<h3 id="关于语言的知识"><a href="#关于语言的知识" class="headerlink" title="关于语言的知识"></a>关于语言的知识</h3><p>ML 中的每句 variable binding 都维护了一个 <strong>静态环境</strong>（不用运行）和一个 <strong>动态环境</strong>（需要运行）。</p>
<p>静态环境中有各个变量和表达式的类型的信息，动态环境中有它们的值的信息。静态环境的内容可以通过类型检查在运行前就得到，但是动态环境需要运行。</p>
<hr>
<p>语法（Syntax）是关于如何写出可解析程序的规则。ML 中的语义（Semantics）包括类型检查和执行两部分。每种不同的语句和表达式都有自己的语法和语义，语义一般包括类型检查语义和执行语义。对于 variable binding 而言，语义是</p>
<ul>
<li>检查类型，扩展静态环境；</li>
<li>运行，扩展动态环境。</li>
</ul>
<h2 id="Rules-for-Expressions"><a href="#Rules-for-Expressions" class="headerlink" title="Rules for Expressions"></a>Rules for Expressions</h2><h3 id="表达式与语句的三个要素"><a href="#表达式与语句的三个要素" class="headerlink" title="表达式与语句的三个要素"></a>表达式与语句的三个要素</h3><p>对于 ML 中的每个表达式、语句，下面这三个问题很重要：</p>
<ul>
<li><strong>Syntax</strong>：它的语法是什么？</li>
<li><strong>Type-Check Semantics</strong>：它如何执行类型检查？类型检查不一定是 <strong>检查</strong>，也包括求得表达式的“输出”类型。</li>
<li><strong>Evaluation Semantics</strong>：它如何执行、求值？</li>
</ul>
<p>ML 中，只有经过了 Type-Check 才能进行 Evaluation。</p>
<h3 id="一些表达式的例子"><a href="#一些表达式的例子" class="headerlink" title="一些表达式的例子"></a>一些表达式的例子</h3><p>表达式可以相互嵌套。套用上面的三个问题可以研究一些表达式。以下是一些例子。</p>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><p>变量是很简单的表达式。</p>
<ul>
<li>Syntax：字母、数字、下划线组成。不以数字开头。</li>
<li>Type-Check Semantics：检查静态环境中是否存在该变量，若存在则类型已知，否则报错。（因为是将变量作为表达式在使用，所以若正确必然存在。）</li>
<li>Evaluation Semantics：从动态环境中取出值。</li>
</ul>
<h4 id="条件表达式"><a href="#条件表达式" class="headerlink" title="条件表达式"></a>条件表达式</h4><ul>
<li>Syntax：$\texttt{if }e_1\texttt{ then }e_2\texttt{ else }e_3​$，其中 $e_1,e_2,e_3​$ 是表达式。</li>
<li>Type-Check Semantics：$e_1​$ 必须是 <code>bool</code>，$e_2​$ 和 $e_3​$ 和最后的返回值类型必须一致。</li>
<li>Evaluation Semantics：先计算 $e_1​$，若为真返回计算 $e_2​$ 的结果，否则返回计算 $e_3​$ 的结果。</li>
</ul>
<h3 id="unit-类型"><a href="#unit-类型" class="headerlink" title="unit 类型"></a><code>unit</code> 类型</h3><p>ML 中有一个特殊的 <code>unit</code> 类型，唯一的取值是 <code>()</code>，例如在加载一个文件的时候返回值就是这个。</p>
<h2 id="The-REPL-and-Errors"><a href="#The-REPL-and-Errors" class="headerlink" title="The REPL and Errors"></a>The REPL and Errors</h2><h3 id="REPL"><a href="#REPL" class="headerlink" title="REPL"></a>REPL</h3><p>REPL 的意思是 Read-Eval-Print-Loop，这是一种对语言的解释器。</p>
<h3 id="Errors"><a href="#Errors" class="headerlink" title="Errors"></a>Errors</h3><p>之前提到的三个要素中，每个地方都可能出错。对应不同种类的错误：</p>
<ul>
<li><strong>Syntax</strong>：语法错误会导致无法通过语法解析。</li>
<li><strong>Type-Check Semantics</strong>：类型检查错误会导致无法通过类型检查，故无法通过编译，但是可以完成语法解析。</li>
<li><strong>Evaluation Semantics</strong>：执行错误会导致运行时抛出异常，但是这种程序可以通过编译。</li>
<li><strong>逻辑错误</strong>：即使通过编译且运行正确，程序也不一定是对的。</li>
</ul>
<h2 id="Shadowing"><a href="#Shadowing" class="headerlink" title="Shadowing"></a>Shadowing</h2><p>Shadowing 指的是后面的变量绑定会覆盖掉前面的。ML 中没有赋值的说法，如果先 <code>val a = 10</code> 然后 <code>val a = 20</code>，实际上是存在两个变量的，但是第一个被覆盖掉了无法访问，而不是重新被赋值。</p>
<p>如果希望同一个名称访问出的变量是不同的变量需要用到这个特性。</p>
<h2 id="Functions-Informally"><a href="#Functions-Informally" class="headerlink" title="Functions Informally"></a>Functions Informally</h2><p>定义函数与使用：</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fun</span> pow(x: <span class="built_in">int</span>, y: <span class="built_in">int</span>) = <span class="keyword">if</span> y = <span class="number">0</span> <span class="keyword">then</span> <span class="number">1</span> <span class="keyword">else</span> x * pow(x, y - <span class="number">1</span>);</span><br><span class="line"><span class="keyword">fun</span> cube(x: <span class="built_in">int</span>) = pow(x, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> a = pow(<span class="number">2</span>, <span class="number">3</span>);</span><br></pre></td></tr></table></figure>
<p>函数体就是一个表达式。参数需要注明类型，但是返回值不需要。</p>
<p><code>pow</code> 使用了递归。所有需要用到循环的地方都可以使用递归加以解决。</p>
<h2 id="Functions-Formally"><a href="#Functions-Formally" class="headerlink" title="Functions Formally"></a>Functions Formally</h2><h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><p>Syntax：<code>fun x0(x1: t1, x2: t2, ... , xn: tn) = e</code>。</p>
<p>Type-check semantics：对于函数 <code>fun x0(x1: t1, x2: t2, ... , xn: tn) = e</code>，首先将 <code>x1</code> 设为 <code>t1</code> …… <code>xn</code> 设为 <code>tn</code> 以及 <code>x0</code> 设为 <code>t1 * t2 * ... * tn -&gt; t</code>，代入 $e​$ 检查是否相容。之所以也要将 <code>x0</code> 代入是因为可能发生递归调用。其中 <code>t</code> 将会由类型推断得到。检查完成后，<code>x0</code> 会被加入静态环境中。</p>
<p>Evaluation semantics：对于每个函数，完成声明后相当于一个值 <code>x0</code>，这个值对应的表达式还没有计算。当有其它表达式调用它的时候从动态环境中找到 <code>x0</code> 完成计算。</p>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h3><p>Syntax：<code>e0(e1, e2, ... , en)</code>。</p>
<p><em>一个语法糖是，当只有一个参数的时候可以不加括号。其它时候都要加。</em></p>
<p>Type-check semantics：检查 <code>e0</code> 的类型是 <code>t1 * t2 * ... * tn -&gt; t</code>，<code>e1</code> 到 <code>en</code> 的类型分别是 <code>t1</code> 到 <code>tn</code>。整个调用语句的返回类型是 <code>t</code>。</p>
<p>Evaluation semantics：在发生调用的时候有一个 <strong>当前的</strong> 环境，在当前环境中计算出 <code>e1</code> 到 <code>en</code>，将结果记为 <code>v1</code> 到 <code>vn</code>。由于经过了类型检查，<code>e0</code> 必然是函数，此时从 <strong>函数被定义时的环境</strong> 中扩展出一个新的环境，添加的内容为将 <code>x1</code> 到 <code>xn</code> 映射为 <code>v1</code> 到 <code>vn</code>，完成计算，然后返回 <strong>当前的环境</strong>。扩展环境这一步不能从当前环境扩展，而要从函数被定义时的环境进行扩展。至于这是为什么，以下是我的一些猜测：</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> x = <span class="number">1</span></span><br><span class="line"><span class="keyword">fun</span> get_x<span class="literal">()</span> = x</span><br><span class="line"><span class="keyword">val</span> x1 = get_x<span class="literal">()</span></span><br><span class="line"><span class="keyword">val</span> x = <span class="number">2</span></span><br><span class="line"><span class="keyword">val</span> x2 = get_x<span class="literal">()</span></span><br></pre></td></tr></table></figure>
<p>如果从当前环境进行扩展，<code>x2</code> 的值将会是 2，这是很让人困惑的。</p>
<h2 id="Pairs-and-Other-Tuples"><a href="#Pairs-and-Other-Tuples" class="headerlink" title="Pairs and Other Tuples"></a>Pairs and Other Tuples</h2><p>Tuple 即为元组。二元组为 Pair。以下讨论仅针对 Pair。</p>
<p>Syntax：<code>(e1, e2)</code>。</p>
<p>Type-check semantics：若 <code>e1</code> 类型为 <code>t1</code>，<code>e2</code> 类型为 <code>t2</code>，则 <code>(e1, e2)</code> 类型为 <code>t1 * t2</code>。</p>
<p>Evaluation semantics：若 <code>e1</code> 值为 <code>v1</code>，<code>e2</code> 值为 <code>v2</code>，则 <code>(e1, e2)</code> 值为 <code>(v1, v2)</code>，这个结果本身也是一种值。</p>
<p>如果想要从 Tuple 中取出某个分量可以这样做：<code>#2 (3, 4)</code> 将会取出第二个分量也就是 <code>4</code>，从 1 开始计数。</p>
<p>例如可以写出交换两个分量的函数：</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fun</span> swap_1(pr: <span class="built_in">int</span> * <span class="built_in">bool</span>) = (#<span class="number">2</span> pr, #<span class="number">1</span> pr)</span><br><span class="line"><span class="keyword">fun</span> swap_2(i: <span class="built_in">int</span>, b: <span class="built_in">bool</span>) = (b, i)</span><br><span class="line"><span class="keyword">val</span> res_1 = swap_1((<span class="number">3</span>, <span class="literal">true</span>))</span><br><span class="line"><span class="keyword">val</span> res_2 = swap_1(<span class="number">3</span>, <span class="literal">true</span>)</span><br><span class="line"><span class="keyword">val</span> res_3 = swap_2((<span class="number">3</span>, <span class="literal">true</span>))</span><br><span class="line"><span class="keyword">val</span> res_4 = swap_2(<span class="number">3</span>, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>
<p><code>res_1</code> 和 <code>res_4</code> 是容易理解的。<code>res_2</code> 可以看作是省略了括号的调用，<code>res_3</code> 则完全不清楚为何可行。这四种调用方式看起来居然是一样的，后面会解释。</p>
<p>Tuple 可以有任意多的元素（编译时），并且可以进行嵌套。</p>
<h2 id="Introducing-Lists"><a href="#Introducing-Lists" class="headerlink" title="Introducing Lists"></a>Introducing Lists</h2><p>列表包含任意多同类型元素（运行时）。</p>
<p>使用 <code>::</code> 可以 append 元素：<code>3 :: [4, 5]</code> 的结果是 <code>[3, 4, 5]</code>。</p>
<p>使用 <code>null</code> 对列表进行判空，使用 <code>hd</code> 和 <code>tl</code> 取出列表的头和尾。</p>
<p>列表的类型和元素有关。如果元素是 <code>int</code>，列表的类型将会是 <code>int list</code>。空列表的类型是 <code>&#39;a list</code>，其中 <code>&#39;a</code> 是 $\alpha$。这个是某种通配的类型，例如 <code>null</code> 的类型就是 <code>&#39;a list -&gt; bool</code>，它可以接受任何类型的列表。</p>
<h2 id="List-Functions"><a href="#List-Functions" class="headerlink" title="List Functions"></a>List Functions</h2><p>列表可以作为函数的参数或者返回值。在这些情况下，如果函数需要访问或生成列表中的每个元素，唯一的办法就是使用递归。</p>
<h2 id="Let-Expressions"><a href="#Let-Expressions" class="headerlink" title="Let Expressions"></a>Let Expressions</h2><p>使用 <code>let</code> 表达式可以在一个表达式中引入新的 scope，这个 scope 中可以进行仅对表达式可见的绑定，除非被更小的 scope 覆盖掉。这个表达式的三个要素略去。</p>
<p>例如 <code>let val x = 3 in x * 2 end</code> 的值是 6（不要掉了 <code>let</code> 中的 <code>val</code>）。</p>
<h2 id="Nested-Functions"><a href="#Nested-Functions" class="headerlink" title="Nested Functions"></a>Nested Functions</h2><p><code>let</code> 表达式中可以存在任意的绑定，函数定义是一种绑定，所以结合起来就可以在函数 $f$ 中定义只对 $f$ 可见的函数。内层的函数依然可以访问外部的一些信息，例如 $f$ 的参数等。</p>
<h2 id="Let-and-Efficiency"><a href="#Let-and-Efficiency" class="headerlink" title="Let and Efficiency"></a>Let and Efficiency</h2><p>使用 <code>let</code> 表达式可以将某些需要递归计算的结果缓存下来，达到加速的目的。考虑下面两种求列表最大值的写法：</p>
<figure class="highlight sml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fun</span> range(left: <span class="built_in">int</span>, right: <span class="built_in">int</span>, step: <span class="built_in">int</span>) = </span><br><span class="line">    <span class="keyword">if</span> left = right <span class="keyword">then</span> <span class="literal">[]</span> <span class="keyword">else</span> left :: range(left + step, right, step)</span><br><span class="line"></span><br><span class="line"><span class="keyword">fun</span> slow_max(xs: <span class="built_in">int</span> <span class="built_in">list</span>) = </span><br><span class="line">    <span class="keyword">if</span> null xs <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> null (tl xs) <span class="keyword">then</span> hd xs <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> hd xs &gt; slow_max(tl xs) <span class="keyword">then</span> hd xs <span class="keyword">else</span> slow_max(tl xs)</span><br><span class="line"></span><br><span class="line"><span class="keyword">fun</span> fast_max(xs: <span class="built_in">int</span> <span class="built_in">list</span>) = </span><br><span class="line">    <span class="keyword">if</span> null xs <span class="keyword">then</span> <span class="number">0</span> <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> null (tl xs) <span class="keyword">then</span> hd xs <span class="keyword">else</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">val</span> mtl = fast_max(tl xs) <span class="keyword">in</span> <span class="keyword">if</span> hd xs &gt; mtl <span class="keyword">then</span> hd xs <span class="keyword">else</span> mtl <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line"><span class="comment">(* for testing *)</span></span><br><span class="line">slow_max(range(<span class="number">0</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">fast_max(range(<span class="number">0</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br></pre></td></tr></table></figure>
<p>第二种情况会快上很多。实际上第一种情况是指数级别的复杂度。</p>
<h2 id="Options"><a href="#Options" class="headerlink" title="Options"></a>Options</h2><p>Options 允许一个值为空。</p>
<p>比如可空的 <code>int</code> 具有类型 <code>int option</code>。通过 <code>NONE</code> 构造空值（类型为 <code>&#39;a option</code>），通过 <code>SOME i</code> 构造一个具有值的 <code>int option</code>。使用 <code>isSome</code> 判断是否为空，使用 <code>valOf</code> 取出非空 Options 的值。</p>
<h2 id="Booleans-and-Comparison-Operations"><a href="#Booleans-and-Comparison-Operations" class="headerlink" title="Booleans and Comparison Operations"></a>Booleans and Comparison Operations</h2><h3 id="布尔运算"><a href="#布尔运算" class="headerlink" title="布尔运算"></a>布尔运算</h3><p>使用 <code>andalso</code> 计算布尔值的且，使用 <code>orelse</code> 计算布尔值的或，使用 <code>not</code> 计算布尔值的非。且和或具有短路特性，因此 <code>andalso</code> 和 <code>orelse</code> 不是函数；<code>not</code> 是一个函数。</p>
<p>值得一提的是，所有能够将 <code>if ... then ... else</code> 作为语句的语言都不需要且、或、非这三个运算，它们的短路特性可以被那个表达式模拟出来。</p>
<h3 id="数值比较"><a href="#数值比较" class="headerlink" title="数值比较"></a>数值比较</h3><p>使用 <code>=</code>，<code>&lt;&gt;</code>，<code>&lt;</code>，<code>&gt;</code>，<code>&lt;=</code>，<code>&gt;=</code> 对整数进行比较。浮点数不能使用等号或者不等号进行比较，这么做是语言强制保证数值正确性。</p>
<h2 id="Benefits-of-No-Mutation"><a href="#Benefits-of-No-Mutation" class="headerlink" title="Benefits of No Mutation"></a>Benefits of No Mutation</h2><p>ML 中的值都是不可变的。这么做的一个好处是，使用代码的人无法修改。如果可以修改就会出现需要区分两个变量到底是同一个引用还是具有相同值的不同引用的问题。因为现在无法修改，所以不管它们是同一个引用还是不同引用都无所谓了。</p>
<p>例如连接两个列表，如果使用某种快速的实现将 <code>x</code> 和 <code>y</code> 连接起来得到 <code>z</code>，假如可以修改，用户在使用 <code>z</code> 时就必须弄清楚这个修改是否会影响到 <code>x</code> 和 <code>y</code>。但是如果无法修改，用户就不会考虑这个问题。</p>
<h2 id="Java-Mutation"><a href="#Java-Mutation" class="headerlink" title="Java Mutation"></a>Java Mutation</h2><p><em>本节没有问题。</em></p>
<h2 id="Pieces-of-a-Language"><a href="#Pieces-of-a-Language" class="headerlink" title="Pieces of a Language"></a>Pieces of a Language</h2><p>对语言的学习可以分成五个部分：</p>
<ul>
<li>Syntax：语言的语法。</li>
<li>Semantics：语言的语义。</li>
<li>Idioms：一些惯用的模式和习惯。</li>
<li>Libraries：常用的库和包。</li>
<li>Tools：常用的工具，例如解释器、调试器、代码格式化工具等。</li>
</ul>
<p>作者建议学习语言的时候要把这五个部分在概念上分开，不要搅在一起学习。</p>
<p>作者的观点：其中 Syntax 只是一些 facts，比较无趣。Library 和 Tools 都是在要用的时候才用去学的。因此最重要的是 Semantics 和 Idiom，它们是掌握语言共性的途径。</p>

      
    </div>

    

    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/函数式编程/" rel="tag"># 函数式编程</a>
          
            <a href="/tags/编程语言理论/" rel="tag"># 编程语言理论</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/02/06/Programming-Languages-Part-A-笔记-1-Introduction/" rel="next" title="Programming Languages (Part A) 笔记 1 Introduction">
                <i class="fa fa-chevron-left"></i> Programming Languages (Part A) 笔记 1 Introduction
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/02/06/Programming-Languages-Part-A-笔记-3-Section-2/" rel="prev" title="Programming Languages (Part A) 笔记 3 Section 2">
                Programming Languages (Part A) 笔记 3 Section 2 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
      <div id="disqus_thread">
        <noscript>
          Please enable JavaScript to view the
          <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a>
        </noscript>
      </div>
    </div>

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Zhang Yang</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">89</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">17</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
          

          
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Section-1"><span class="nav-number">1.</span> <span class="nav-text">Section 1</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ML-Variable-Bindings-and-Expressions"><span class="nav-number">1.1.</span> <span class="nav-text">ML Variable Bindings and Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#一些语法"><span class="nav-number">1.1.1.</span> <span class="nav-text">一些语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#关于语言的知识"><span class="nav-number">1.1.2.</span> <span class="nav-text">关于语言的知识</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Rules-for-Expressions"><span class="nav-number">1.2.</span> <span class="nav-text">Rules for Expressions</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#表达式与语句的三个要素"><span class="nav-number">1.2.1.</span> <span class="nav-text">表达式与语句的三个要素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#一些表达式的例子"><span class="nav-number">1.2.2.</span> <span class="nav-text">一些表达式的例子</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#变量"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件表达式"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">条件表达式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#unit-类型"><span class="nav-number">1.2.3.</span> <span class="nav-text">unit 类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#The-REPL-and-Errors"><span class="nav-number">1.3.</span> <span class="nav-text">The REPL and Errors</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#REPL"><span class="nav-number">1.3.1.</span> <span class="nav-text">REPL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Errors"><span class="nav-number">1.3.2.</span> <span class="nav-text">Errors</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shadowing"><span class="nav-number">1.4.</span> <span class="nav-text">Shadowing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Functions-Informally"><span class="nav-number">1.5.</span> <span class="nav-text">Functions Informally</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Functions-Formally"><span class="nav-number">1.6.</span> <span class="nav-text">Functions Formally</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#函数定义"><span class="nav-number">1.6.1.</span> <span class="nav-text">函数定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#函数调用"><span class="nav-number">1.6.2.</span> <span class="nav-text">函数调用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pairs-and-Other-Tuples"><span class="nav-number">1.7.</span> <span class="nav-text">Pairs and Other Tuples</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Introducing-Lists"><span class="nav-number">1.8.</span> <span class="nav-text">Introducing Lists</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#List-Functions"><span class="nav-number">1.9.</span> <span class="nav-text">List Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Let-Expressions"><span class="nav-number">1.10.</span> <span class="nav-text">Let Expressions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Nested-Functions"><span class="nav-number">1.11.</span> <span class="nav-text">Nested Functions</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Let-and-Efficiency"><span class="nav-number">1.12.</span> <span class="nav-text">Let and Efficiency</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Options"><span class="nav-number">1.13.</span> <span class="nav-text">Options</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Booleans-and-Comparison-Operations"><span class="nav-number">1.14.</span> <span class="nav-text">Booleans and Comparison Operations</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#布尔运算"><span class="nav-number">1.14.1.</span> <span class="nav-text">布尔运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数值比较"><span class="nav-number">1.14.2.</span> <span class="nav-text">数值比较</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Benefits-of-No-Mutation"><span class="nav-number">1.15.</span> <span class="nav-text">Benefits of No Mutation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java-Mutation"><span class="nav-number">1.16.</span> <span class="nav-text">Java Mutation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pieces-of-a-Language"><span class="nav-number">1.17.</span> <span class="nav-text">Pieces of a Language</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Yang</span>

  

  
</div>




  <div class="powered-by">由 <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> 强力驱动 v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Muse</a> v6.4.0</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  

  
    <script id="dsq-count-scr" src="https://dimlight1998.disqus.com/count.js" async></script>
  

  
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'http://DimLight1998.github.io/2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/';
        this.page.identifier = '2019/02/06/Programming-Languages-Part-A-笔记-2-Section-1/';
        this.page.title = 'Programming Languages (Part A) 笔记 2 Section 1';
        };
      function loadComments () {
        var d = document, s = d.createElement('script');
        s.src = 'https://dimlight1998.disqus.com/embed.js';
        s.setAttribute('data-timestamp', '' + +new Date());
        (d.head || d.body).appendChild(s);
      }
      
        loadComments();
      
    </script>
  












  





  

  

  

  
  

  
  

  
    
      <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
        processEscapes: true,
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      },
      TeX: {equationNumbers: { autoNumber: "AMS" }}
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>
<script type="text/javascript" src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

    
  


  
  

  

  

  

  

  

</body>
</html>
